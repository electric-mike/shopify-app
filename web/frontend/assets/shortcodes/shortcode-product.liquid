{% capture handle %}{% include 'shortcode-render' render: 'handle' %}{% endcapture %}
{% assign prod = all_products[handle] %}

{% if prod.title != '' %}
  <style>
    .shortcode-product { display: grid; padding: 1em 0; grid-gap: 1.25em; margin-bottom: 1.25em }
    @media(min-width: 768px) { .shortcode-product { grid-template-columns: 0.5fr 1fr; } }
    .shortcode-product .product-image-wrapper { border: none !important; }
    .shortcode-product .description { margin-bottom: 1.25em; }
  </style>
  <div class="product shortcode-product">
    <a class="product-image-wrapper" href="{{ prod.url | within: collection }}">
      <img
        class="product-image"
        src="{{  prod.featured_image.src | img_url: '360x' }}"
        alt="{{ prod.title | escape }}"
        data-sizes="auto"
      />
    </a>
    <div class="product-info">
      <a href="{{ prod.url | within: collection }}">
        <h3>{{ prod.title }}</h3>
      </a>
      <div class="description"><p>{{ prod.description | strip_html | truncate: 215 }}</p></div>
      <a class="button btn" href="{{ prod.url | within: collection }}">View Product</a>
    </div>
  </div>
{% endif %}
